# Subdomain enumeration

## Via SSL / TLS certificates
With crt.sh or any certification database search, you can search for registered subdomains.

## Via Google Dorking
Dorking can be your tool.

## Via DNS Bruteforce.
We use dnsrecon to get that.
`dnsrecon -t brt -d acmeitsupport.thm`

## Via sublist3r
This is a tool that uses OSINT from a lot of sources to detect possible domains.
Once installed:
`./sublist3r.py -d acmeitsupport.thm`

## Virtual hosts
Some domains aren't always hosted in public DNS results, and aren't publicitely available.
Instead, the DNS record is **on the developer machine or a server, in `/etc/hosts` for example.**

Because web servers can host multiple websites from one server when a website is requested from a client, the server knows which website the client wants from the **Host** header. We can utilise this host header by making changes to it and monitoring the response to see if we've discovered a new website.

### Using ffuf to bruteforce virtual host discovery
```shell-session
ffuf -w /usr/share/wordlists/SecLists/Discovery/DNS/namelist.txt -H "Host: FUZZ.acmeitsupport.thm" -u http://MACHINE_IP
```

The parameter `-w` specifies the wordlists, and the `-H` specifies the header.

By filtering the responses of a specified size, we can get the responses of the size we want. 
Example:
`ffuf -w /usr/share/wordlists/SecLists/Discovery/DNS/namelist.txt -H "Host: FUZZ.acmeitsupport.thm" -u http://10.10.142.199 -fs 200`
